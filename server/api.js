
const express = require('express')

// Initialize router
const router = express.Router()


////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
// Module exports

module.exports = () => {
    
	router.get('/movie', async ({ query, movieQueue, omdb }, res) => {
        try{
            let movies = await omdb.search(query.s)
            movieQueue.pushMovies(movies.Search)
            res.status(200).json(movies.Search)
        } catch(_) {
            res.status(500).send()
        }
	});


	return { router }
}










